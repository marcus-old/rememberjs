var remember={version:1,controls:[],Control:function(e,t){var n=remember._defaultFunctions(e),r;t=t||{};e.setAttribute("data-remember","true");e.setAttribute("data-remember-initiated","true");this.element=e;this.get=t.get||n.get;this.set=t.set||n.set;this.reset=t.reset||n.reset;this.def=t.def||this.get();if(e.getAttribute("data-remember-id")){this.id=e.getAttribute("data-remember-id")}else if(e.id){this.id="id-"+e.id}else if(e.name){r=remember._getIndex(e,function(t){return t.name==e.name&&!t.id});this.id="name-"+e.name+"-"+r}else if(e.tagName.toLowerCase()=="input"&&e.type){r=remember._getIndex(e,function(t){return t.tagName.toLowerCase()=="input"&&t.type==e.type&&!t.id&&!t.name});this.id="input-"+e.type+"-"+r}else{r=remember._getIndex(e,function(t){return t.tagName==e.tagName&&!t.id&&!t.name});this.id="tag-"+e.tagName+"-"+r}remember.controls.push(this);if(typeof remember.initiated!="undefined")remember.load()},Error:function(e){this.name="rememberError";this.message=e||"Unknown error"},change:function(e){for(var t=0,n,r,i;t<remember.controls.length;t++){n=remember.controls[t];r=n.element;i=r.tagName.toLowerCase();if(i=="input"||i=="select"||i=="textarea"){if(r.addEventListener){r.addEventListener("change",e)}else{r.attachEvent("onchange",e)}}else{(function(t,n){var r=t.get();if(r!=n){n=r;e()}var i=arguments.callee;setTimeout(function(){i(t,n)},2e3)})(n,n.get())}}},init:function(){var e=remember._getElements();for(var t=0;t<e.length;t++){if(!e[t].getAttribute("data-remember-initiated"))new remember.Control(e[t])}remember.load();remember.initiated=true},save:function(){var e,t={};for(var n=0,r=remember.controls.length;n<r;n++){e=remember.controls[n];t[e.id]=e.get()}remember._storage(JSON.stringify(t));if(!remember._storage()){throw new remember.Error("Failed to save options")}return remember.load()},load:function(){var e;if(remember._storage()){e=JSON.parse(remember._storage())}else{if(remember.reset()&&remember._storage()){e=JSON.parse(remember._storage())}else{throw new remember.Error("Error setting up data for first-run")}}for(var t in e){if(!e.hasOwnProperty(t))continue;for(var n=0,r={};n<remember.controls.length;n++){if(remember.controls[n].id==t){r=remember.controls[n];break}}if(r.set)r.set(e[t])}return true},get:function(e){for(var t=remember.controls,n=0,r=t.length;n<r;n++){if(t[n].element=e){return t[n].get()}}return null},set:function(e,t){for(var n=remember.controls,r=0,i=n.length;r<i;r++){if(n[r].element=e){return n[r].set(t)}}return null},reset:function(e){var t=remember.controls,n,r;if(typeof e=="undefined"||e==null||e.nodeType!=1){for(n=0,r=t.length;n<r;n++){t[n].reset()}}else{for(n=0,r=t.length;n<r;n++){if(t[n].element=e){t[n].reset();break}}}return remember.save()},_defaultFunctions:function(e){var t,n,r,i;if(e.tagName.toLowerCase()=="input"){t=e.type.toLowerCase()||"text"}n=function(){return this.element.value};r=function(e){return this.element.value=e};i=function(){return this.element.value=this.def};if(t=="checkbox"||t=="radio"){n=function(){return this.element.checked};r=function(e){return this.element.checked=e?true:false};i=function(){return this.element.checked=this.def}}if(e.tagName.toLowerCase()=="select"){n=function(){return this.element.selectedIndex};r=function(e){return this.element.selectedIndex=e};i=function(){return this.element.selectedIndex=this.def}}return{get:n,set:r,reset:i}},_getElements:function(){for(var e=document.all,t=0,n=[],r=e.length;t<r;t++){if(e[t].getAttribute("data-remember")!=null)n.push(e[t])}return n},_getIndex:function(e,t){var n=document.all,r=0;t=t||function(){return true};for(var i=0,s=n.length;i<s;i++){if(n[i]==e)break;if(t(n[i]))r++}return r},_storage:function(e){function r(e,t,n){var r=new Date;r.setTime(r.getTime()+(n||365)*24*60*60*1e3);var i="; expires="+r.toGMTString();document.cookie=e+"="+t+i+"; path=/"}function i(e){var t=e+"=";var n=document.cookie.split(";");for(var r=0,i=n.length;r<i;r++){var s=n[r];while(s.charAt(0)===" ")s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null}var t=localStorage?true:false,n="remember-options-"+remember.ver;if(typeof e!=="undefined"&&e!==null){if(t){localStorage.setItem(n,e)}else{r(n,e,365)}}if(typeof e==="undefined"){if(t){return localStorage.getItem(n)}else{return i(n)}}if(e===null){if(t){return localStorage.removeItem(n)}else{r(n,"",-1)}}return false}};remember.Error.prototype=new Error;remember.Error.prototype.constructor=remember.Error;if(document.addEventListener){document.addEventListener("DOMContentLoaded",remember.init)}else{document.attachEvent("onreadystatechange",remember.init)}